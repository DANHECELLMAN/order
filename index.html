<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <title>AprilSmart | China Custom Motorized Blinds Order Form</title>
    <style>
        /* ÂºïÂÖ•Áé∞‰ª£Â≠ó‰Ωì */
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@300;400;600;700&display=swap');

        :root {
            --brand-black: #1a1a1a;
            --brand-accent: #2c3e50;
            --bg-color: #f8fafc;
            --card-shadow: 0 10px 25px -5px rgba(0, 0, 0, 0.05), 0 8px 10px -6px rgba(0, 0, 0, 0.05);
            --transition: all 0.25s cubic-bezier(0.4, 0, 0.2, 1);
            --highlight-gold: #fffbeb; 
            --error-red: #ef4444;
        }

        body { 
            font-family: 'Inter', system-ui, -apple-system, sans-serif; 
            background: var(--bg-color); 
            padding: 60px 20px; 
            color: var(--brand-black);
            line-height: 1.5;
        }

        .form-container { 
            max-width: 800px; 
            margin: auto; 
            background: ÔºÉFFFFE0; 
            padding: 50px; 
            border-radius: 24px; 
            box-shadow: var(--card-shadow); 
        }

        h2 { 
            text-align: center; 
            font-weight: 700; 
            letter-spacing: -0.025em; 
            margin-bottom: 40px; 
            color: var(--brand-black);
            font-size: 28px;
            text-transform: uppercase;
        }

        .group { 
            margin-bottom: 35px; 
            padding-bottom: 20px;
            border-bottom: 1px solid #f1f5f9;
        }
        
        /* --- Èù¢ÊñôÊùøÂùóÊ†∑Âºè --- */
        .fabric-priority-group {
            background: #fff;
            border: 2px solid #1a1a1a;
            padding: 25px;
            border-radius: 20px;
            box-shadow: 0 4px 12px rgba(0,0,0,0.03);
            position: relative;
            transition: var(--transition);
        }
        .fabric-title-bar {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 15px;
        }
        .status-badge {
            font-size: 10px;
            padding: 2px 8px;
            border-radius: 6px;
            text-transform: uppercase;
        }
        .status-required { background: #fee2e2; color: #ef4444; border: 1px solid #fecaca; }
        .status-ok { background: #dcfce7; color: #16a34a; border: 1px solid #bbf7d0; }

        .fabric-category-selector {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(110px, 1fr));
            gap: 10px;
            margin-bottom: 20px;
        }
        .category-card {
            border: 1.5px solid #e2e8f0;
            border-radius: 12px;
            padding: 12px 8px;
            text-align: center;
            cursor: pointer;
            transition: var(--transition);
            background: #fff;
            position: relative;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
        }
        .category-card:hover { border-color: #94a3b8; }
        .category-card input { position: absolute; opacity: 0; }
        .category-card .icon { font-size: 20px; margin-bottom: 5px; }
        .category-card span { font-size: 11px; font-weight: 700; color: #475569; line-height: 1.2; }
        
        .category-card input:checked + .cat-ui {
            border: 2px solid var(--brand-black);
            position: absolute; top: -1px; left: -1px; right: -1px; bottom: -1px;
            border-radius: 12px;
            background: rgba(0,0,0,0.02);
        }
        .category-card input:checked ~ span { color: var(--brand-black); }

        /* ‰ª•‰∏ã‰øùÁïôÊâÄÊúâÂéüÊúâÊ†∑Âºè */
        .group:last-of-type { border-bottom: none; }
        label { display: block; margin-bottom: 12px; font-size: 12px; text-transform: uppercase; color: #64748b; font-weight: 700; letter-spacing: 0.1em; }
        input[type="text"], input[type="email"], input[type="tel"], input[type="number"], select, textarea { 
            width: 100%; padding: 14px 16px; border: 1.5px solid #e2e8f0; border-radius: 12px; box-sizing: border-box; background: #fff; font-size: 15px; transition: var(--transition);
        }
        input:focus, select:focus { border-color: var(--brand-black); outline: none; box-shadow: 0 0 0 4px rgba(0,0,0,0.05); }
        .row { display: flex; gap: 20px; margin-bottom: 15px; }
        .row div { flex: 1; }
        .mount-options { display: grid; grid-template-columns: 1fr 1fr; gap: 20px; }
        .mount-card { border: 1.5px solid #e2e8f0; border-radius: 16px; padding: 20px; cursor: pointer; transition: var(--transition); position: relative; background: #fff; }
        .mount-card:hover { border-color: #cbd5e1; transform: translateY(-2px); }
        .mount-card input { position: absolute; opacity: 0; }
        .mount-card input:checked ~ .card-ui { border: 2px solid var(--brand-black); position: absolute; top: -1px; left: -1px; right: -1px; bottom: -1px; border-radius: 16px; box-shadow: 0 10px 15px -3px rgba(0,0,0,0.1); }
        .mount-img { width: 100%; border-radius: 8px; margin-bottom: 12px; cursor: zoom-in; transition: transform 0.3s ease; }
        .mount-img:hover { transform: scale(1.05); }
        .options-scroll-box { margin-top: 15px; padding: 20px; background: #f8fafc; border: 1.5px solid #f1f5f9; border-radius: 16px; max-height: 420px; overflow-y: auto; position: relative; }
        .options-scroll-box::-webkit-scrollbar { width: 5px; }
        .options-scroll-box::-webkit-scrollbar-thumb { background: #cbd5e1; border-radius: 10px; }
        .selection-grid { display: grid; grid-template-columns: repeat(auto-fill, minmax(150px, 1fr)); gap: 15px; }
        .grid-item { border: 1.5px solid #e2e8f0; border-radius: 12px; padding: 12px; text-align: center; cursor: pointer; transition: var(--transition); position: relative; background: #fff; }
        .grid-item:hover { border-color: #94a3b8; transform: translateY(-2px); }
        .grid-item img { width: 100%; height: 110px; object-fit: cover; border-radius: 8px; margin-bottom: 10px; cursor: zoom-in; transition: transform 0.3s ease; }
        .grid-item img:hover { transform: scale(1.05); }
        .grid-item span { font-size: 12px; color: #1e293b; font-weight: 600; display: block; padding-top: 5px; }
        .grid-item input { position: absolute; opacity: 0; }
        .grid-item input:checked + .item-ui { border: 2.5px solid var(--brand-black); position: absolute; top: -1px; left: -1px; right: -1px; bottom: -1px; border-radius: 12px; background: rgba(0,0,0,0.02); }
        .selected-summary { margin-top: 20px; padding: 15px; background: #fff; border: 1.5px dashed #e2e8f0; border-radius: 12px; font-size: 13px; }
        .summary-tag { display: inline-block; background: var(--brand-black); color: #fff; padding: 4px 12px; margin: 3px; border-radius: 20px; font-weight: 500; }
        #modal { display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.9); z-index: 999999; justify-content: center; align-items: center; backdrop-filter: blur(8px); cursor: zoom-out; }
        #modal-img { max-width: 90%; max-height: 85%; border-radius: 12px; box-shadow: 0 20px 40px rgba(0,0,0,0.5); border: 4px solid #fff; object-fit: contain; }
        button[type="submit"] { width: 100%; padding: 18px; background: var(--brand-black); color: #fff; border: none; border-radius: 14px; font-size: 16px; font-weight: 700; cursor: pointer; margin-top: 30px; transition: var(--transition); letter-spacing: 1px; }
        button[type="submit"]:hover { background: #333; transform: scale(1.02); }
        .btn-clear { background: #f1f5f9; color: #475569; padding: 6px 12px; border-radius: 8px; font-size: 11px; font-weight: 600; transition: var(--transition); border: none; cursor: pointer; }
        .btn-clear:hover { background: #e2e8f0; color: #0f172a; }
        .must-pick-note { color: #ef4444; font-weight: 500; font-size: 12px; }
        .compact-selection { display: grid; grid-template-columns: 1fr 1fr; gap: 15px; }
        .footer-note { font-size: 13px; color: #94a3b8; text-align: center; margin-top: 30px; font-weight: 500; }
    </style>
</head>
<body>

<div class="form-container">
    <h2>AprilSmart Custom Order</h2>
    <form action="https://formspree.io/f/xdanvzbn" method="POST" onsubmit="return validateForm()">
        
        <div class="group">
            <label>Full Name / ÂßìÂêç</label>
            <input type="text" name="Customer Name" placeholder="Enter your full name" required>
        </div>

        <div class="group">
            <label>Email / ÈÇÆÁÆ±</label>
            <input type="email" name="_replyto" placeholder="yourname@email.com" required>
        </div>

        <div class="group">
            <label>Contract Number / ËÅîÁ≥ªÁîµËØù</label>
            <input type="tel" name="Phone_Number" placeholder="+1 (000) 000-0000" required>
        </div>

        <div class="row">
            <div>
                <label>Width / ÂÆΩÂ∫¶ (Whole)</label>
                <input type="number" name="Width_Base" placeholder="Inches" required>
            </div>
            <div>
                <label>Height / È´òÂ∫¶ (Whole)</label>
                <input type="number" name="Height_Base" placeholder="Inches" required>
            </div>
        </div>

        <div class="row group">
            <div>
                <label>Width: Fractional</label>
                <select name="Width_Fraction">
                    <option value="0/0">0/0</option>
                    <option value="1/8">1/8"</option>
                    <option value="1/4">1/4"</option>
                    <option value="3/8">3/8"</option>
                    <option value="1/2">1/2"</option>
                    <option value="5/8">5/8"</option>
                    <option value="3/4">3/4"</option>
                    <option value="7/8">7/8"</option>
                </select>
            </div>
            <div>
                <label>Height: Fractional</label>
                <select name="Height_Fraction">
                    <option value="0/0">0/0</option>
                    <option value="1/8">1/8"</option>
                    <option value="1/4">1/4"</option>
                    <option value="3/8">3/8"</option>
                    <option value="1/2">1/2"</option>
                    <option value="5/8">5/8"</option>
                    <option value="3/4">3/4"</option>
                    <option value="7/8">7/8"</option>
                </select>
            </div>
        </div>

        <div class="group">
            <label>Mount Type / ÂÆâË£ÖÊñπÂºè (Click to Zoom)</label>
            <div class="mount-options">
                <label class="mount-card">
                    <input type="radio" name="Mount_Type" value="Inside Mount" checked>
                    <div class="card-ui"></div>
                    <div class="card-content">
                        <img src="image/inside.png" class="mount-img" onclick="zoomImg(this.src)" alt="Inside">
                        <div style="font-size:11px; color:#475569;"><b>INSIDE MOUNT</b><br>W=Order W, H=Order H<br>Depth‚â•2"</div>
                    </div>
                </label>
                <label class="mount-card">
                    <input type="radio" name="Mount_Type" value="Outside Mount">
                    <div class="card-ui"></div>
                    <div class="card-content">
                        <img src="image/outside.png" class="mount-img" onclick="zoomImg(this.src)" alt="Outside">
                        <div style="font-size:11px; color:#475569;"><b>OUTSIDE MOUNT</b><br>W=Win+6", H=Win+6"<br>*Best for Blackout</div>
                    </div>
                </label>
            </div>
        </div>

        <div class="group fabric-priority-group" id="fabricSection">
            <div class="fabric-title-bar">
                <label style="margin-bottom:0">Step 1: Choose Fabric Category / Èù¢ÊñôÂ§ßÁ±ª</label>
                <span id="fabricStatus" class="status-badge status-required">Required / ÂøÖÈÄâ</span>
            </div>
            
            <div class="fabric-category-selector">
                <label class="category-card">
                    <input type="radio" name="Fabric_Category" value="blackout" onchange="updateFabricList()">
                    <div class="cat-ui"></div>
                    <span class="icon">üåë</span>
                    <span>100% Blackout</span>
                </label>
                <label class="category-card">
                    <input type="radio" name="Fabric_Category" value="filtering" onchange="updateFabricList()">
                    <div class="cat-ui"></div>
                    <span class="icon">üåó</span>
                    <span>Light Filtering</span>
                </label>
                <label class="category-card">
                    <input type="radio" name="Fabric_Category" value="zebra" onchange="updateFabricList()">
                    <div class="cat-ui"></div>
                    <span class="icon">ü¶ì</span>
                    <span>Zebra Shades</span>
                </label>
                <label class="category-card">
                    <input type="radio" name="Fabric_Category" value="cellular" onchange="updateFabricList()">
                    <div class="cat-ui"></div>
                    <span class="icon">üêù</span>
                    <span>Cellular Shades</span>
                </label>
                <label class="category-card">
                    <input type="radio" name="Fabric_Category" value="roman" onchange="updateFabricList()">
                    <div class="cat-ui"></div>
                    <span class="icon">üìú</span>
                    <span>Roman Shades</span>
                </label>
                <label class="category-card">
                    <input type="radio" name="Fabric_Category" value="woven" onchange="updateFabricList()">
                    <div class="cat-ui"></div>
                    <span class="icon">ü™µ</span>
                    <span>Woven Wood</span>
                </label>
            </div>

            <div id="persistentSummary" style="display:none; margin-bottom:15px; border-top:1px solid #f1f5f9; padding-top:15px;">
                <div style="display:flex; justify-content:space-between; align-items:center; margin-bottom:10px;">
                    <label style="margin-bottom:0">Selected Styles / Â∑≤ÈÄâÊ†∑Âºè</label>
                    <button type="button" class="btn-clear" onclick="clearFabrics()">Clear All</button>
                </div>
                <div id="selectedSummary" class="selected-summary" style="margin-top:0; background:#f8fafc;">Selected: (None)</div>
            </div>

            <div id="fabricDetailSection" class="options-scroll-box" style="display:none; background: #fff;">
                <div class="fabric-header" style="margin-bottom:10px;">
                    <label style="margin-bottom:0">Step 2: Select Styles / ÈÄâÊã©ÂÖ∑‰ΩìËä±Ëâ≤</label>
                </div>
                <div id="fabricGrid" class="selection-grid"></div>
            </div>
        </div>

        <div class="group">
            <label>Motor Type</label>
            <div class="options-scroll-box">
                <div class="selection-grid">
                    <label class="grid-item"><input type="radio" name="Motor_Type" value="Standard Motor" checked><div class="item-ui"></div><img src="image/Standard Motor.png" onclick="zoomImg(this.src)"><span>Standard Motor</span></label>
                    <label class="grid-item"><input type="radio" name="Motor_Type" value="Standard Motor+HUB"><div class="item-ui"></div><img src="image/Standard Motor+HUB.png" onclick="zoomImg(this.src)"><span>Standard Motor+HUB</span></label>
                    <label class="grid-item"><input type="radio" name="Motor_Type" value="MATTER Motor Over Thread"><div class="item-ui"></div><img src="image/MATTER Motor Over Thread(homekit).png" onclick="zoomImg(this.src)"><span>MATTER Motor (homekit)</span></label>
                </div>
            </div>
        </div>

        <div class="group">
            <label>Valance Options / ÁΩ©Â£≥ÈÄâÊã©</label>
            <div class="options-scroll-box">
                <div class="selection-grid">
                    <label class="grid-item"><input type="radio" name="Valance_Option" value="White Square Valance" checked><div class="item-ui"></div><img src="image/With Square Valance-White.png" onclick="zoomImg(this.src)"><span>White Square Valance</span></label>
                    <label class="grid-item"><input type="radio" name="Valance_Option" value="Black Square Valance"><div class="item-ui"></div><img src="image/With Square Valance-Black.png" onclick="zoomImg(this.src)"><span>Black Square Valance</span></label>
                    <label class="grid-item"><input type="radio" name="Valance_Option" value="Tonal Valance Fabric Insert"><div class="item-ui"></div><img src="image/Tonal Valance With Fabric Inserts.png" onclick="zoomImg(this.src)"><span>Tonal Valance Fabric Insert</span></label>
                </div>
            </div>
        </div>

        <div class="group">
            <label>Bottom Rod Options / Â∫ïÊùÜÈÄâÊã©</label>
            <div class="options-scroll-box">
                <div class="selection-grid">
                    <label class="grid-item"><input type="radio" name="Rod_Option" value="Standard Bottom Rod" checked><div class="item-ui"></div><img src="image/Standard Bottom Rod.png" onclick="zoomImg(this.src)"><span>Standard Bottom Rod</span></label>
                    <label class="grid-item"><input type="radio" name="Rod_Option" value="Fabric Wrapped Rod"><div class="item-ui"></div><img src="image/Fabric Wrapped Bottom Rod.png" onclick="zoomImg(this.src)"><span>Fabric Wrapped Rod</span></label>
                    <label class="grid-item"><input type="radio" name="Rod_Option" value="White Square Rod"><div class="item-ui"></div><img src="image/Square Bottom Rod-White.png" onclick="zoomImg(this.src)"><span>Square Rod - White</span></label>
                    <label class="grid-item"><input type="radio" name="Rod_Option" value="Black Square Rod"><div class="item-ui"></div><img src="image/Square Bottom Rod-Black.png" onclick="zoomImg(this.src)"><span>Square Rod - Black</span></label>
                </div>
            </div>
        </div>

        <div class="row group">
            <div style="flex:1;">
                <label>Roll Position</label>
                <div class="compact-selection">
                    <label class="grid-item"><input type="radio" name="Roll_Position" value="Standard Roll" checked><div class="item-ui"></div><img src="image/Standard Roll.png" onclick="zoomImg(this.src)"><span>Standard Roll</span></label>
                    <label class="grid-item"><input type="radio" name="Roll_Position" value="Reverse Roll"><div class="item-ui"></div><img src="image/Reverse Roll.png" onclick="zoomImg(this.src)"><span>Reverse Roll</span></label>
                </div>
            </div>
            <div style="flex:1;">
                <label>Motor Side</label>
                <div class="compact-selection">
                    <label class="grid-item"><input type="radio" name="Motor_Side" value="Motor-Left" checked><div class="item-ui"></div><img src="image/Left side.png" onclick="zoomImg(this.src)"><span>Motor-Left</span></label>
                    <label class="grid-item"><input type="radio" name="Motor_Side" value="Motor-Right"><div class="item-ui"></div><img src="image/Right side.png" onclick="zoomImg(this.src)"><span>Motor-Right</span></label>
                </div>
            </div>
        </div>

        <div class="group">
            <label>Other accessories <span class="must-pick-note">(Pick Charger or Magnetic Cable)</span></label>
            <div class="options-scroll-box">
                <div class="selection-grid" id="accGrid">
                    <label class="grid-item"><input type="checkbox" name="Accessories" value="1-ch remote"><div class="item-ui"></div><img src="image/1-Channel Remote Control.png" onclick="zoomImg(this.src)"><span>1-ch Remote</span></label>
                    <label class="grid-item"><input type="checkbox" name="Accessories" value="15-ch remote"><div class="item-ui"></div><img src="image/15-Channel Remote Control.png" onclick="zoomImg(this.src)"><span>15-ch Remote</span></label>
                    <label class="grid-item"><input type="checkbox" name="Accessories" value="Charger Block"><div class="item-ui"></div><img src="image/Charger Block.png" onclick="zoomImg(this.src)"><span>Charger Block</span></label>
                    <label class="grid-item"><input type="checkbox" name="Accessories" value="Charger Cable" class="cable-group"><div class="item-ui"></div><img src="image/Charger Cable.png" onclick="zoomImg(this.src)"><span>Charger Cable</span></label>
                    <label class="grid-item"><input type="checkbox" name="Accessories" value="Magnetic Cable" class="cable-group"><div class="item-ui"></div><img src="image/Magnetic Cable.png" onclick="zoomImg(this.src)"><span>Magnetic Cable</span></label>
                    <label class="grid-item"><input type="checkbox" name="Accessories" value="Light Blockers-White"><div class="item-ui"></div><img src="image/Light Blockers-White.png" onclick="zoomImg(this.src)"><span>Blockers-White</span></label>
                    <label class="grid-item"><input type="checkbox" name="Accessories" value="Light Blockers-Black"><div class="item-ui"></div><img src="image/Light Blockers-Black.png" onclick="zoomImg(this.src)"><span>Blockers-Black</span></label>
                    <label class="grid-item"><input type="checkbox" name="Accessories" value="Side Rail-White"><div class="item-ui"></div><img src="image/Side Rail Track-White.png" onclick="zoomImg(this.src)"><span>Rail-White</span></label>
                    <label class="grid-item"><input type="checkbox" name="Accessories" value="Side Rail-Black"><div class="item-ui"></div><img src="image/Side Rail Track-Black.png" onclick="zoomImg(this.src)"><span>Rail-Black</span></label>
                    <label class="grid-item"><input type="checkbox" name="Accessories" value="Solar Panel"><div class="item-ui"></div><img src="image/Solar Panel.png" onclick="zoomImg(this.src)"><span>Solar Panel</span></label>
                </div>
            </div>
        </div>

        <div class="group">
            <label>Additional Notes</label>
            <textarea name="Message" rows="4" placeholder="Share any special instructions here..."></textarea>
        </div>

        <button type="submit">SUBMIT ORDER REQUEST</button>
        <p class="footer-note">AprilSmart ¬Æ Customized Shading Solutions</p>
    </form>
</div>

<div id="modal" onclick="this.style.display='none'">
    <img id="modal-img" src="">
</div>

<script>
    // 1. Êï∞ÊçÆÂÆö‰πâ
    const blackoutFiles = [
        "Blackout_Baltimore Anthracite 25", "Blackout_Baltimore Bronze 26", "Blackout_Baltimore Flint 27",
        "Blackout_Bermuda Basalt 24", "Blackout_Bermuda Platinum 22", "Blackout_Bermuda Toffee 23",
        "Blackout_BouvardiaDark Grey 17", "Blackout_BouvardiaMedium Grey 18", "Blackout_Cream White 06",
        "Blackout_Linen Stone 01", "Blackout_Linen Stone 02", "Blackout_Safari Cream 04",
        "Blackout_Safari Midnight 05", "Blackout_Safari Stone 07", "Blackout_Safari White 03",
        "Blackout_SafariBiscuit 20", "Blackout_SafariSmoke 19", "Blackout_Treebark Obsidian 28",
        "Blackout_Treebark Extra White 29", "Blackout_Vigor Cream 08", "Blackout_Vigor Milky 11",
        "Blackout_Vigor RockWhite 21", "Blackout_Vigor sage 10", "Blackout_Vigor Wheat 09",
        "Blackout_Vinyl Beige 13", "Blackout_Vinyl Black 14", "Blackout_Vinyl Grey 16",
        "Blackout_Vinyl White 12", "Blackout_Vinyl WhiteGrey-15"
    ];
    // Êñ∞Â¢ûÔºöLight Filtering Êï∞ÊçÆ
    const filteringFiles = [
        "Light Filtering_5% OPENNESS AVENTUS BLACK 54", "Light Filtering_5% OPENNESS AVENTUS ICE 51",
        "Light Filtering_5% OPENNESS AVENTUS WHITE GREY 53", "Light Filtering_5% OPENNESS AVENTUSWHITE LINEN 52",
        "Light Filtering_50% SUNSCREEN BLACK 61", "Light Filtering_50% SUNSCREEN COCOA 60",
        "Light Filtering_50% SUNSCREEN GREY 59", "Light Filtering_50% SUNSCREEN WHITE 58",
        "Light Filtering_70% Bouvardia Cream 64", "Light Filtering_70% Bouvardia Dark Grey 66",
        "Light Filtering_70% Bouvardia Medium Grey 65", "Light Filtering_70% ESSENTIAL CREAM-68",
        "Light Filtering_70% ESSENTIAL GREY-69", "Light Filtering_70% ESSENTIALWHITE 55",
        "Light Filtering_70% LINEN CARAM EL-67", "Light Filtering_70% LINEN SAND 57",
        "Light Filtering_70% LINEN WHITE 36", "Light Filtering_70% SAFAR IVORY 63",
        "Light Filtering_70% SAFARI WHITE 62", "Light Filtering_70% TREEBARK BLACK-75",
        "Light Filtering_70% TREEBARK CREAM-71", "Light Filtering_70% TREEBARK GREY-73",
        "Light Filtering_70% TREEBARK NAVY-72", "Light Filtering_70% TREEBARK SHALLOW-74",
        "Light Filtering_70% TREEBARK WHITE-70"
    ];
    // Êñ∞Â¢ûÔºöZebra Shades Êï∞ÊçÆ
    const zebraFiles = [
        "Zebra_60% BLACK-34", "Zebra_60% GREY-32", "Zebra_60% NAVY-33", 
        "Zebra_60% WHITE-31", "Zebra_70% LINEN-43", "Zebra_85% GREY-35", 
        "Zebra_85% WAVE BLACK-37", "Zebra_85% WAVE GREY-36", "Zebra_100% BLUE-44", 
        "Zebra_100% CHARCOAL-46", "Zebra_100% DARK GREY-41", "Zebra_100% MID GREY-40",
        "Zebra_100% OLIVE-45", "Zebra_100% ROCK BLACK-42", "Zebra_100% WHITE STONE-38", 
        "Zebra_100% WHITE-39"
    ];
    // Êñ∞Â¢ûÔºöCellular Shades Êï∞ÊçÆ
    const cellularFiles = [
        "Cellular_Blackout Blue 110", "Cellular_Blackout Brown 107", 
        "Cellular_Blackout Grey 109", "Cellular_Blackout Prestige Black-118", 
        "Cellular_Blackout Prestige Brown-119", "Cellular_Blackout Prestige Grey White-116", 
        "Cellular_Blackout Prestige Grey-117", "Cellular_Blackout Prestige Linen-120", 
        "Cellular_Blackout Toffe 108", "Cellular_Blackout White 106", 
        "Cellular_Light Filtering Blue 105", "Cellular_Light Filtering Brown 102", 
        "Cellular_Light Filtering Grey 104", "Cellular_Light Filtering Toffe 103", 
        "Cellular_Light Filtering White 101"
    ];
    // Êñ∞Â¢ûÔºöRoman Shades Êï∞ÊçÆ
    const romanFiles = [
        "Roman_50% Clio Sand-225", "Roman_50% CrossLoom Grey-223", 
        "Roman_50% CrossLoom Sand-222", "Roman_50% CrossLoom White-221", 
        "Roman_60% Clio Grey-226", "Roman_60% Clio Mixblack-227", 
        "Roman_60% Clio White-224", "Roman_70% Essential Smoky-229", 
        "Roman_70% Essential White-228", "Roman_70% Linen White-234", 
        "Roman_70% Safari Biscuit-233", "Roman_70% Safari Cream-232", 
        "Roman_70% Safari Grey-231", "Roman_70% Safari White-230", 
        "Roman_100% Dream Feather Grey-241", "Roman_100% Dream Fog Mist-240", 
        "Roman_100% Dream Grey-242", "Roman_100% Dream White-239", 
        "Roman_100% Linen Stone-219", "Roman_100% Linen White-220", 
        "Roman_100% Safari Biscuit-238", "Roman_100% Safari Cream-237", 
        "Roman_100% Safari Grey-236", "Roman_100% Safari White-235"
    ];
    // Êñ∞Â¢ûÔºöWoven Wood Êï∞ÊçÆ
    const wovenFiles = [
        "Woven_50% Bareloom Bamboo Fiber-326", "Woven_50% Bareloom Flax Bamboo-332", 
        "Woven_50% Bareloom Flax Reed-333", "Woven_50% Bareloom Hemp-334", 
        "Woven_50% Bareloom Jute Flax-321", "Woven_50% Bareloom Jute-322", 
        "Woven_50% Bareloom Knaf-323", "Woven_50% Bareloom Rammus-325", 
        "Woven_50% Bareloom Rammus-327", "Woven_50% Bareloom Rammus-328", 
        "Woven_50% Bareloom Rammus-329", "Woven_50% Bareloom Rammus-330", 
        "Woven_50% Bareloom Rammus-331", "Woven_50% Bareloom Red Knaf-324", 
        "Woven_70% Bareloom Bamboo Fiber-326", "Woven_70% Bareloom Flax Bamboo-332", 
        "Woven_70% Bareloom Flax Bamboo-333", "Woven_70% Bareloom Hemp-334", 
        "Woven_70% Bareloom Jute Flax-321", "Woven_70% Bareloom Jute-322", 
        "Woven_70% Bareloom Knaf-323", "Woven_70% Bareloom Rammus-325", 
        "Woven_70% Bareloom Rammus-327", "Woven_70% Bareloom Rammus-328", 
        "Woven_70% Bareloom Rammus-329", "Woven_70% Bareloom Rammus-330", 
        "Woven_70% Bareloom Rammus-331", "Woven_70% Bareloom Red Knaf-324", 
        "Woven_100% Bareloom Bamboo Fiber-326", "Woven_100% Bareloom Flax Bamboo-332", 
        "Woven_100% Bareloom Flax Reed-333", "Woven_100% Bareloom Hemp-334", 
        "Woven_100% Bareloom Jute Flax-321", "Woven_100% Bareloom Jute-322", 
        "Woven_100% Bareloom Knaf-323", "Woven_100% Bareloom Rammus-325", 
        "Woven_100% Bareloom Rammus-327", "Woven_100% Bareloom Rammus-328", 
        "Woven_100% Bareloom Rammus-329", "Woven_100% Bareloom Rammus-330", 
        "Woven_100% Bareloom Rammus-331", "Woven_100% Bareloom Red Knaf-324"
    ];

    const fabricData = {
        blackout: blackoutFiles.map(file => ({
            name: file.replace('Blackout_', '').replace(/_/g, ' '),
            img: `image/Blackout/${file}.png` 
        })),
        filtering: filteringFiles.map(file => ({
            name: file.replace('Light Filtering_', '').replace(/_/g, ' '),
            img: `image/Light Filtering/${file}.png`
        })),
        zebra: zebraFiles.map(file => ({
            name: file.replace('Zebra_', '').replace(/_/g, ' '),
            img: `image/Zebra/${file}.png`
        })),
        cellular: cellularFiles.map(file => ({
            name: file.replace('Cellular_', '').replace(/_/g, ' '),
            img: `image/Cellular/${file}.png`
        })),
        roman: romanFiles.map(file => ({
            name: file.replace('Roman_', '').replace(/-/g, ' '),
            img: `image/Roman/${file}.png`
        })),
       woven: wovenFiles.map(file => ({
            name: file.replace('Woven_', '').replace(/-/g, ' '),
            img: `image/Woven/${file}.png`
        }))
    };

    let globalSelectedFabrics = new Map();

    // 2. Êõ¥Êñ∞Èù¢ÊñôÂàóË°®
    function updateFabricList() {
        const categoryInput = document.querySelector('input[name="Fabric_Category"]:checked');
        const grid = document.getElementById('fabricGrid');
        const section = document.getElementById('fabricDetailSection');
        
        if (!categoryInput) return;
        
        const category = categoryInput.value;
        grid.innerHTML = ''; 

        if (fabricData[category] && fabricData[category].length > 0) {
            section.style.display = 'block';
            fabricData[category].forEach((item) => {
                const isChecked = globalSelectedFabrics.has(item.name) ? 'checked' : '';
                const div = document.createElement('label');
                div.className = 'grid-item';
                div.innerHTML = `
                    <input type="checkbox" name="Selected_Fabrics" value="${item.name}" ${isChecked} onchange="toggleFabricSelection(this)">
                    <div class="item-ui"></div>
                    <img src="${item.img}" onclick="zoomImg(event, this.src)" alt="${item.name}">
                    <span>${item.name}</span>`;
                grid.appendChild(div);
            });
        } else {
            section.style.display = 'none';
        }
        renderSummary();
        updateStatusBadge();
    }

    function toggleFabricSelection(el) {
        if (el.checked) { globalSelectedFabrics.set(el.value, true); } 
        else { globalSelectedFabrics.delete(el.value); }
        renderSummary();
        updateStatusBadge();
    }

    function updateStatusBadge() {
        const badge = document.getElementById('fabricStatus');
        if (globalSelectedFabrics.size > 0) {
            badge.innerText = "Ready / Â∑≤ÈÄâ";
            badge.className = "status-badge status-ok";
        } else {
            badge.innerText = "Required / ÂøÖÈÄâ";
            badge.className = "status-badge status-required";
        }
    }

    // Ê†∏ÂøÉ‰øÆÊîπÔºöÊ∏≤ÊüìÊ±áÊÄªÂå∫ÂüüÂπ∂ÊéßÂà∂ÊòæÁ§∫ÈöêËóè
    function renderSummary() {
        const summaryDiv = document.getElementById('selectedSummary');
        const persistentBox = document.getElementById('persistentSummary');
        const names = Array.from(globalSelectedFabrics.keys());
        
        if (names.length > 0) {
            summaryDiv.innerHTML = names.map(n => `<span class="summary-tag">${n}</span>`).join(' ');
            persistentBox.style.display = 'block';
        } else {
            summaryDiv.innerHTML = 'Selected: (None)';
            persistentBox.style.display = 'none';
        }
    }

    function clearFabrics() {
        globalSelectedFabrics.clear();
        updateFabricList();
    }

    // 3. ÈÄöÁî®ÁöÑÂõæÁâáÊîæÂ§ßÂáΩÊï∞
    function zoomImg() {
        let src = "";
        let e = null;

        if (arguments.length === 1) {
            src = arguments[0];
        } else if (arguments.length === 2) {
            e = arguments[0];
            src = arguments[1];
        }

        if (e && e.stopPropagation) {
            e.preventDefault();
            e.stopPropagation();
        }

        const modal = document.getElementById('modal');
        const modalImg = document.getElementById('modal-img');
        if (modal && modalImg) {
            modalImg.src = src;
            modal.style.display = 'flex';
        }
    }

    function validateForm() {
        if (globalSelectedFabrics.size === 0) {
            alert("‚ö†Ô∏è Please select at least one Fabric style!\nËØ∑Ëá≥Â∞ëÈÄâÊã©‰∏ÄÊ¨æÈù¢ÊñôÊ†∑ÂºèÔºÅ");
            document.getElementById('fabricSection').scrollIntoView({ behavior: 'smooth' });
            return false;
        }
        return true;
    }
</script>
</body>
</html>

